---
title: "ã‚ãã... ç‰¹å®šã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«å¯¾ã—ã¦git sparse-checkoutã‚’å®Ÿè¡Œã—ãŸã„"
author: 
   - name: "Ryo Nakagami"
     url: https://github.com/RyoNakagami
date: "2025-08-04"
date-modified: "2025-08-05"
categories: [git checkout]
---

## ğŸ¯ ã‚´ãƒ¼ãƒ«

- [`git-sparse-checkout`](https://github.com/RyoNakagami/regmonkey_gitcommand/blob/main/src/git-sparse-checkout)ã‚¹ã‚¯ãƒªãƒ—ãƒˆã®è§£èª¬


```bash
#!/bin/bash
set -euo pipefail

usage() {
  echo "Usage: $0 -u <clone_url> -d <target_dir> -b <branch> -p <sparse_path>"
  exit 1
}

while getopts "u:d:b:p:" opt; do
  case $opt in
    u) CLONE_URL=$OPTARG ;;
    d) TARGET_DIR=$OPTARG ;;
    b) BRANCH=$OPTARG ;;
    p) SPARSE_PATH=$OPTARG ;;
    *) usage ;;
  esac
done

if [[ -z "$CLONE_URL" || -z "$TARGET_DIR" || -z "$BRANCH" || -z "$SPARSE_PATH" ]]; then
  usage
fi

git clone --filter=blob:none --no-checkout "$CLONE_URL" "$TARGET_DIR"
cd "$TARGET_DIR"
git config core.sparseCheckout true
echo -e "$SPARSE_PATH" | tr ':' '\n' > .git/info/sparse-checkout
git checkout "$BRANCH"
```


## âœ… ä½¿ç”¨æ–¹æ³•

```bash
git-sparse-checkout -u <clone_url> -d <target_dir> -b <branch> -p <sparse_path>
```

[ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿]{.min-section}

| ã‚ªãƒ—ã‚·ãƒ§ãƒ³ | èª¬æ˜                                                     | å¿…é ˆ    |
| ------ | ------------------------------------------------------- | -------- |
| `-u`   | Gitã‚¯ãƒ­ãƒ¼ãƒ³ç”¨URL                                          | âœ… ã¯ã„   |
| `-d`   | ã‚¯ãƒ­ãƒ¼ãƒ³å…ˆã®ã‚¿ãƒ¼ã‚²ãƒƒãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª                             | âœ… ã¯ã„   |
| `-b`   | ãƒã‚§ãƒƒã‚¯ã‚¢ã‚¦ãƒˆã™ã‚‹ãƒ–ãƒ©ãƒ³ãƒ                                    | âœ… ã¯ã„   |
| `-p`   | ãƒªãƒã‚¸ãƒˆãƒªå†…ã§ãƒã‚§ãƒƒã‚¯ã‚¢ã‚¦ãƒˆã™ã‚‹ãƒ‘ã‚¹ï¼ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã¯`:`ã§åŒºåˆ‡ã‚Šã¾ã™  | âœ… ã¯ã„   |


### ä½¿ç”¨ä¾‹

```bash
git-sparse-checkout \
  -u https://github.com/RyoNakagami/PythonCompetitiveProgramming \
  -d ./checkout_sandbox \
  -b main \
  -p /Leetcode:/projecteuler/data
```

ã“ã‚Œã«ã‚ˆã‚Šï¼š

1. å®Œå…¨ãªå±¥æ­´ã‚„blobãªã—ã§ãƒªãƒã‚¸ãƒˆãƒªã‚’ã‚¯ãƒ­ãƒ¼ãƒ³
2. ã‚¹ãƒ‘ãƒ¼ã‚¹ãƒã‚§ãƒƒã‚¯ã‚¢ã‚¦ãƒˆãƒ¢ãƒ¼ãƒ‰ã‚’æœ‰åŠ¹åŒ–
3. `main`ãƒ–ãƒ©ãƒ³ãƒã‹ã‚‰`/Leetcode`ã¨`/projecteuler/data`ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®ã¿ã‚’ãƒã‚§ãƒƒã‚¯ã‚¢ã‚¦ãƒˆ
4. çµæœã‚’`./checkout_sandbox`ã«æ›¸ãè¾¼ã¿ã¾ã‚€

## ğŸ” ã‚·ã‚§ãƒ«ã‚¹ã‚¯ãƒªãƒ—ãƒˆã®è©³ç´°è§£èª¬


ãƒ•ã‚¡ã‚¤ãƒ«ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã›ãšï¼ŒåŠ¹ç‡çš„ã«ãƒªãƒã‚¸ãƒˆãƒªã‚’ã‚¯ãƒ­ãƒ¼ãƒ³ã—ã¾ã™ï¼

```bash
git clone --filter=blob:none --no-checkout "$CLONE_URL" "$TARGET_DIR"
```

|ã‚ªãƒ—ã‚·ãƒ§ãƒ³|èª¬æ˜|
|-------|-------|
|`--filter=blob:none`| åˆæœŸæ®µéšã§ãƒ•ã‚¡ã‚¤ãƒ«ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ï¼ˆblobï¼‰ã‚’é™¤å¤–ã—ï¼Œãƒªãƒã‚¸ãƒˆãƒªã®ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ï¼ˆã‚³ãƒŸãƒƒãƒˆï¼Œãƒ„ãƒªãƒ¼ï¼‰ã®ã¿ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã™ã‚‹ãƒ•ã‚£ãƒ«ã‚¿ã‚’ä½¿ç”¨ã—ãŸéƒ¨åˆ†ã‚¯ãƒ­ãƒ¼ãƒ³ã‚’è¡Œã„ã¾ã™ï¼ã“ã‚Œã«ã‚ˆã‚Šï¼Œãƒ‡ã‚£ã‚¹ã‚¯ä½¿ç”¨é‡ãŒå‰Šæ¸›ã•ã‚Œã¾ã™ï¼|
|`--no-checkout`| ãƒªãƒã‚¸ãƒˆãƒªã‚’ã‚¯ãƒ­ãƒ¼ãƒ³ã™ã‚‹ãŒï¼Œä½œæ¥­ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒã‚§ãƒƒã‚¯ã‚¢ã‚¦ãƒˆã—ãªã„ï¼ã¤ã¾ã‚Šï¼Œä½œæ¥­ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã¯ç©ºã®çŠ¶æ…‹ã«ãªã‚Šã¾ã™ï¼ˆãƒ•ã‚¡ã‚¤ãƒ«ã¯ãƒã‚§ãƒƒã‚¯ã‚¢ã‚¦ãƒˆã•ã‚Œã¦ã„ã¾ã›ã‚“ï¼‰ï¼|
: {tbl-colwidths="[25,75]"}


æ¬¡ã«ï¼Œã“ã®ãƒ­ãƒ¼ã‚«ãƒ«ãƒªãƒã‚¸ãƒˆãƒªã«å¯¾ã—ã¦ã‚¹ãƒ‘ãƒ¼ã‚¹ãƒã‚§ãƒƒã‚¯ã‚¢ã‚¦ãƒˆã‚’æœ‰åŠ¹ã«ã—ã¾ã™ï¼ã“ã‚Œã«ã‚ˆã‚Šï¼Œãƒªãƒã‚¸ãƒˆãƒªã‹ã‚‰ä½œæ¥­ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ç‰¹å®šã®ãƒ‘ã‚¹ã®ã¿ã‚’é¸æŠçš„ã«ãƒã‚§ãƒƒã‚¯ã‚¢ã‚¦ãƒˆã™ã‚‹ã“ã¨ã‚’Gitã«æŒ‡ç¤ºã—ã¾ã™ï¼


```bash
git config core.sparseCheckout true
```

ç¶šã„ã¦ï¼Œ


```bash
echo -e "$SPARSE_PATH" | tr ':' '\n' > .git/info/sparse-checkout
```

|ã‚³ãƒãƒ³ãƒ‰|èª¬æ˜|
|-------|-------|
|`echo -e "$SPARSE_PATH"`| ã‚¨ã‚¹ã‚±ãƒ¼ãƒ—ã‚·ãƒ¼ã‚±ãƒ³ã‚¹ï¼ˆ`\n`ãªã©ï¼‰ã‚’è§£é‡ˆã—ã¦`SPARSE_PATH`å¤‰æ•°ã®å€¤ã‚’å‡ºåŠ›ã—ã¾ã™ï¼|
|`tr ':' '\n'`| ã‚³ãƒ­ãƒ³ï¼ˆ`:`ï¼‰æ–‡å­—ã‚’æ”¹è¡Œæ–‡å­—ï¼ˆ`\n`ï¼‰ã«å¤‰æ›ã—ï¼Œã‚³ãƒ­ãƒ³åŒºåˆ‡ã‚Šã®ãƒªã‚¹ãƒˆã‚’è¡ŒåŒºåˆ‡ã‚Šã®ãƒªã‚¹ãƒˆã«åŠ¹æœçš„ã«å¤‰æ›ã—ã¾ã™ï¼|
|`> .git/info/sparse-checkout`|ã“ã®ãƒ‘ã‚¹ã®ãƒªã‚¹ãƒˆï¼ˆ1è¡Œã«1ã¤ï¼‰ã‚’ç‰¹åˆ¥ãªsparse-checkoutè¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã«æ›¸ãè¾¼ã¿ã¾ã™|
: {tbl-colwidths="[30,70]"}


å‚è€ƒæ–‡çŒ®
----------
- [regmonkey_gitcommand](https://github.com/RyoNakagami/regmonkey_gitcommand)
